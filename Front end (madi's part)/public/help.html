<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>BeFR - Help</title>
    <link rel="stylesheet" type="text/css" href="Style.css">
</head>

<body>

    <header>
        <h1><span class="red">Be</span> FR</h1>
        <nav>
            <a href="index.html">Home</a>
            <a href="prediction.html">Prediction</a>
            <a href="info.html">Info</a>
            <a class="active" href="help.html">Help</a>
        </nav>
    </header>

    <section class="content">

        <h2>FAQ:</h2>

        <table class="faq-table">
            <tr>
                <td>Question 1</td>
                <td>✔</td>
            </tr>
            <tr>
                <td>Question 2</td>
                <td>✔</td>
            </tr>
            <tr>
                <td>Question 3</td>
                <td>✔</td>
            </tr>
        </table>

        <h2>How to Use:</h2>
        <ol class="howto">
            <li>Navigate to the prediction page...</li>
            <li>Look for the Upload an Image button...</li>
            <li>Click on the button and upload an image from your device...</li>
            <li>Get your Result!</li>
            <li>To report an error to our admins, click the button below and let us know what’s wrong!</li>
        </ol>

        <button class="error-btn">Report an Error</button>

    </section>

    <!-- ========================== -->
    <!--      ERROR REPORT MODAL    -->
    <!-- ========================== -->

    <div id="errorModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>

            <h2>Report an Error</h2>

            <form id="errorForm" enctype="multipart/form-data">
                <label for="message">Describe the issue:</label>
                <textarea id="message" name="message" required></textarea>

                <label for="image">Upload the image (optional):</label>
                <input type="file" id="image" name="image" accept="image/*">

                <button type="submit" class="submit-btn">Submit Report</button>
            </form>
        </div>
    </div>

    <!-- ========================== -->
    <!--          JAVASCRIPT        -->
    <!-- ========================== -->

    <script>
        const modal = document.getElementById("errorModal");
        const btn = document.querySelector(".error-btn");
        const closeBtn = document.querySelector(".close");
        const form = document.getElementById("errorForm");

        // Open modal
        btn.onclick = () => {
            modal.style.display = "block";
        };

        // Close modal (X button)
        closeBtn.onclick = () => {
            modal.style.display = "none";
        };

        // Close when clicking outside the modal
        window.onclick = (event) => {
            if (event.target === modal) {
                modal.style.display = "none";
            }
        };

        // Form submission handler
        form.addEventListener("submit", async (e) => {
            e.preventDefault();

            const formData = new FormData(form);

            const response = await fetch("/report-error", {
                method: "POST",
                body: formData
            });

            if (response.ok) {
                alert("Your error report has been submitted. Thank you!");
                modal.style.display = "none";
                form.reset();
            } else {
                alert("There was an issue submitting your report. Please try again.");
            }
        });
    </script>

</body>

</html>
